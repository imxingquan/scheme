#lang racket
(require racket/gui)
(require "count-file-lines.rkt")

(define frame (new frame% [label "Example"][ width 800] [height 600]))

(define editor-canvas (new editor-canvas% 
                           (parent frame) 
                           (label "Editor Canvas"))) 
(define text (new text%))

(define menu-bar (new menu-bar% 
                      (parent frame))) 
(define menu-file
  (new menu% 
     (label "&File") 
     (parent menu-bar)))

(new menu-item%
     (label "&Open Directory")
     (parent menu-file)
     (callback (lambda (obj event)
                 (define a (get-directory))
                 (send text erase)
                 (define sum-str (sum-line a ".java" (lambda (x)
                                       (printf "~a" x)
                                       (send text insert x) 
                                       )))
                 (send text insert sum-str)

                 )))

(new menu% 
     (label "&About") 
     (parent menu-bar))


(send text insert "计算代码行数") 
(send editor-canvas set-editor text) 


(send frame show #t)

